<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 Year in Review - Interactive Visualizations</title>
    
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #0F2027 0%, #203A43 50%, #2C5364 100%);
            min-height: 100vh;
            color: #f5f5f5;
        }
        
        #root {
            width: 100%;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // All 49 events - UPDATED from Google Sheet
        const ALL_EVENTS = [
          { name: 'Oaxaca city', start: '2025-01-01', end: '2025-01-04', people: ['Polly'], country: 'Mexico', types: ['Travel', 'Hiking'], intensity: 3 },
          { name: 'Guadalajara', start: '2025-01-04', end: '2025-01-18', people: ['MX Fam'], country: 'Mexico', types: ['Travel'], intensity: 4 },
          { name: 'Promoted to Manager', start: '2025-02-14', end: '2025-02-14', people: ['Solo'], country: 'USA', types: ['Career'], intensity: 5 },
          { name: 'PhD Defense', start: '2025-02-21', end: '2025-02-21', people: ['Solo'], country: 'USA', types: ['Career'], intensity: 5 },
          { name: 'Lane8', start: '2025-03-08', end: '2025-03-08', people: ['Polly', 'Polly Friends'], country: 'USA', types: ['Shows'], intensity: 4 },
          { name: 'Mexico City', start: '2025-03-18', end: '2025-03-19', people: ['Polly'], country: 'Mexico', types: ['Travel'], intensity: 3 },
          { name: 'Puerto Escondido', start: '2025-03-19', end: '2025-03-22', people: ['Polly Friends', 'Polly'], country: 'Mexico', types: ['Travel'], intensity: 4 },
          { name: 'Day breakers', start: '2025-04-05', end: '2025-04-05', people: ['Polly', 'Raniti Friends'], country: 'USA', types: ['Shows'], intensity: 4 },
          { name: 'Lima', start: '2025-04-14', end: '2025-04-16', people: ['Raniti Friends'], country: 'Peru', types: ['Travel'], intensity: 4 },
          { name: 'Cusco', start: '2025-04-16', end: '2025-04-18', people: ['Raniti Friends'], country: 'Peru', types: ['Travel'], intensity: 3 },
          { name: 'Inca Trail', start: '2025-04-18', end: '2025-04-22', people: ['Raniti Friends'], country: 'Peru', types: ['Travel', 'Hiking'], intensity: 5 },
          { name: 'Rainbow Mountain', start: '2025-04-23', end: '2025-04-23', people: ['Raniti Friends'], country: 'Peru', types: ['Travel', 'Hiking'], intensity: 5 },
          { name: 'Cusco', start: '2025-04-23', end: '2025-04-25', people: ['Raniti Friends'], country: 'Peru', types: ['Travel'], intensity: 3 },
          { name: 'Lima', start: '2025-04-25', end: '2025-04-26', people: ['Raniti Friends'], country: 'Peru', types: ['Travel'], intensity: 3 },
          { name: 'Got Engaged', start: '2025-04-27', end: '2025-04-27', people: ['Polly'], country: 'USA', types: ['Love'], intensity: 5 },
          { name: 'Cincinnati', start: '2025-04-29', end: '2025-05-03', people: ['Raniti Friends', 'Polly', 'MX Fam', 'US Fam'], country: 'USA', types: ['Travel'], intensity: 4 },
          { name: 'Graduated with PhD', start: '2025-05-01', end: '2025-05-01', people: ['MX Fam', 'US Fam', 'Polly'], country: 'USA', types: ['Travel', 'Career'], intensity: 5 },
          { name: 'Hocking Hills', start: '2025-05-03', end: '2025-05-05', people: ['MX Fam', 'Polly'], country: 'USA', types: ['Travel', 'Hiking'], intensity: 3 },
          { name: 'Chicago', start: '2025-05-07', end: '2025-05-11', people: ['MX Fam', 'Polly'], country: 'USA', types: ['Travel'], intensity: 3 },
          { name: 'Pittsburgh', start: '2025-05-11', end: '2025-05-16', people: ['MX Fam'], country: 'USA', types: ['Travel'], intensity: 2 },
          { name: 'West Virginia', start: '2025-05-16', end: '2025-05-17', people: ['US Fam', 'Polly Friends'], country: 'USA', types: ['Travel'], intensity: 2 },
          { name: 'Healdsburg, CA', start: '2025-06-14', end: '2025-06-14', people: ['Polly'], country: 'USA', types: ['Travel', 'Kayaking'], intensity: 2 },
          { name: 'Munich', start: '2025-06-17', end: '2025-06-17', people: ['Solo'], country: 'Germany', types: ['Travel'], intensity: 2 },
          { name: 'Vienna', start: '2025-06-18', end: '2025-06-20', people: ['MX Fam'], country: 'Austria', types: ['Travel'], intensity: 3 },
          { name: 'Budapest', start: '2025-06-20', end: '2025-06-23', people: ['MX Fam', 'Raniti Friends'], country: 'Hungary', types: ['Travel'], intensity: 4 },
          { name: 'Belgrade', start: '2025-06-23', end: '2025-06-28', people: ['Coworkers'], country: 'Serbia', types: ['Travel', 'Career'], intensity: 3 },
          { name: 'Shakira', start: '2025-06-30', end: '2025-06-30', people: ['Raniti Friends'], country: 'USA', types: ['Shows'], intensity: 4 },
          { name: 'Tahoe Camping', start: '2025-07-03', end: '2025-07-05', people: ['Raniti Friends', 'Polly'], country: 'USA', types: ['Travel'], intensity: 4 },
          { name: 'Sonoma Biking', start: '2025-07-11', end: '2025-07-13', people: ['Polly', 'Raniti Friends', 'US Fam'], country: 'USA', types: ['Travel', 'Camping', 'Hiking'], intensity: 4 },
          { name: 'Regina Spektor', start: '2025-07-22', end: '2025-07-22', people: ['Solo'], country: 'USA', types: ['Shows', 'Cycling'], intensity: 3 },
          { name: 'Outside Lands', start: '2025-08-09', end: '2025-08-09', people: ['Polly', 'Polly Friends'], country: 'USA', types: ['Shows'], intensity: 4 },
          { name: 'Denver', start: '2025-08-15', end: '2025-08-18', people: ['Polly', 'Polly Friends'], country: 'USA', types: ['Shows'], intensity: 3 },
          { name: 'Breckenridge', start: '2025-08-18', end: '2025-08-22', people: ['Coworkers'], country: 'USA', types: ['Travel', 'Career'], intensity: 3 },
          { name: 'Embryo Freezing', start: '2025-08-18', end: '2025-08-31', people: ['Solo'], country: 'USA', types: ['Babymaking'], intensity: 4 },
          { name: 'Egg Retrieval', start: '2025-08-31', end: '2025-08-31', people: ['Solo'], country: 'USA', types: ['Babymaking'], intensity: 5 },
          { name: 'Rawayana & Bomba EstÃ©reo', start: '2025-09-12', end: '2025-09-12', people: ['Raniti Friends', 'Polly'], country: 'USA', types: ['Shows'], intensity: 4 },
          { name: 'Stanford Course', start: '2025-09-24', end: '2025-10-22', people: ['Solo'], country: 'USA', types: ['Career'], intensity: 2 },
          { name: 'Engagement Photos', start: '2025-10-07', end: '2025-10-07', people: ['Polly'], country: 'USA', types: ['Love'], intensity: 3 },
          { name: 'Yellowstone', start: '2025-10-11', end: '2025-10-18', people: ['Polly'], country: 'USA', types: ['Travel'], intensity: 4 },
          { name: 'Coco at SF Symphony', start: '2025-10-29', end: '2025-10-29', people: ['Polly'], country: 'USA', types: ['Shows'], intensity: 4 },
          { name: 'NYC Bachelorette', start: '2025-11-13', end: '2025-11-16', people: ['Raniti Friends'], country: 'USA', types: ['Love'], intensity: 5 },
          { name: 'Pittsburgh', start: '2025-11-16', end: '2025-11-29', people: ['US Fam', 'MX Fam', 'Polly'], country: 'USA', types: ['Travel'], intensity: 3 },
          { name: 'Engagement Party', start: '2025-11-22', end: '2025-11-22', people: ['Polly Friends', 'Raniti Friends', 'US Fam', 'MX Fam', 'Polly'], country: 'USA', types: ['Love'], intensity: 5 },
          { name: 'Got Married!', start: '2025-11-22', end: '2025-11-22', people: ['Polly'], country: 'USA', types: ['Love'], intensity: 5 },
          { name: 'Turkey Trot', start: '2025-11-27', end: '2025-11-27', people: ['Polly'], country: 'USA', types: ['Running', 'Travel'], intensity: 3 },
          { name: 'Seattle', start: '2025-12-11', end: '2025-12-16', people: ['Raniti Friends'], country: 'USA', types: ['Travel'], intensity: 3 },
          { name: 'Austin', start: '2025-12-16', end: '2025-12-18', people: ['Coworkers'], country: 'USA', types: ['Travel'], intensity: 2 },
          { name: 'Amelia Island', start: '2025-12-20', end: '2025-12-26', people: ['Polly', 'US Fam'], country: 'USA', types: ['Travel'], intensity: 4 },
          { name: 'Daytona Beach', start: '2025-12-26', end: '2025-12-28', people: ['Polly'], country: 'USA', types: ['Travel'], intensity: 3 }
        ];

        // Sankey Flow Visualization
        const SankeyView = ({ events, colors }) => {
          const [hoveredFlow, setHoveredFlow] = useState(null);

          const flows = useMemo(() => {
            const flowData = {};
            events.forEach(event => {
              const days = Math.floor((new Date(event.end) - new Date(event.start)) / (1000 * 60 * 60 * 24)) + 1;
              event.people.forEach(person => {
                event.types.forEach(type => {
                  const key = `${person}-${type}`;
                  flowData[key] = (flowData[key] || 0) + days;
                });
              });
            });
            return Object.entries(flowData).map(([key, days]) => {
              const [person, type] = key.split('-');
              return { person, type, days };
            }).filter(f => f.days > 0);
          }, [events]);

          const people = ['Solo', 'Polly', 'MX Fam', 'US Fam', 'Raniti Friends', 'Polly Friends', 'Coworkers'];
          const types = ['Travel', 'Love', 'Career', 'Shows', 'Hiking', 'Camping', 'Cycling', 'Kayaking', 'Running', 'Babymaking'];
          const leftX = 100;
          const rightX = 700;
          const nodeHeight = 40;
          const nodeGap = 10;

          return (
            <div style={{
              background: 'rgba(255,255,255,0.03)',
              borderRadius: '20px',
              padding: '40px',
              border: '1px solid rgba(255,255,255,0.1)'
            }}>
              <h2 style={{ margin: '0 0 30px 0', fontSize: '28px', fontWeight: 700, color: '#ffffff', textAlign: 'center' }}>
                Sankey Flow: People â†’ Activities
              </h2>

              <svg width="900" height="700" style={{ display: 'block', margin: '0 auto' }}>
                {people.map((person, i) => {
                  const y = i * (nodeHeight + nodeGap) + 30;
                  return (
                    <g key={person}>
                      <rect x={leftX} y={y} width={150} height={nodeHeight} fill={colors.people[person]} rx="8" />
                      <text x={leftX + 75} y={y + nodeHeight / 2} textAnchor="middle" dominantBaseline="middle" 
                        style={{ fill: '#ffffff', fontSize: '12px', fontWeight: 700 }}>
                        {person}
                      </text>
                    </g>
                  );
                })}

                {types.map((type, i) => {
                  const y = i * (nodeHeight + nodeGap) + 30;
                  return (
                    <g key={type}>
                      <rect x={rightX} y={y} width={150} height={nodeHeight} fill={colors.types[type]} rx="8" />
                      <text x={rightX + 75} y={y + nodeHeight / 2} textAnchor="middle" dominantBaseline="middle"
                        style={{ fill: '#ffffff', fontSize: '12px', fontWeight: 700 }}>
                        {type}
                      </text>
                    </g>
                  );
                })}

                {flows.map((flow, i) => {
                  const personIdx = people.indexOf(flow.person);
                  const typeIdx = types.indexOf(flow.type);
                  if (personIdx === -1 || typeIdx === -1) return null;
                  const y1 = personIdx * (nodeHeight + nodeGap) + 30 + nodeHeight / 2;
                  const y2 = typeIdx * (nodeHeight + nodeGap) + 30 + nodeHeight / 2;
                  const isHovered = hoveredFlow === i;
                  const strokeWidth = Math.max(2, flow.days / 2);
                  
                  return (
                    <path
                      key={i}
                      d={`M ${leftX + 150} ${y1} C ${(leftX + rightX) / 2} ${y1}, ${(leftX + rightX) / 2} ${y2}, ${rightX} ${y2}`}
                      stroke={colors.people[flow.person]}
                      strokeWidth={strokeWidth}
                      fill="none"
                      opacity={isHovered ? 0.9 : 0.4}
                      style={{ cursor: 'pointer', transition: 'all 0.3s ease' }}
                      onMouseEnter={() => setHoveredFlow(i)}
                      onMouseLeave={() => setHoveredFlow(null)}
                    />
                  );
                })}
              </svg>

              {hoveredFlow !== null && (
                <div style={{
                  marginTop: '20px',
                  textAlign: 'center',
                  padding: '15px',
                  background: 'rgba(255,255,255,0.05)',
                  borderRadius: '10px',
                  border: `2px solid ${colors.people[flows[hoveredFlow].person]}`
                }}>
                  <div style={{ fontSize: '18px', fontWeight: 700, color: '#ffffff' }}>
                    {flows[hoveredFlow].person} â†’ {flows[hoveredFlow].type}
                  </div>
                  <div style={{ fontSize: '14px', color: '#a8b2d1', marginTop: '5px' }}>
                    {flows[hoveredFlow].days} days
                  </div>
                </div>
              )}
            </div>
          );
        };

        // Circle Year View
        const CircleYearView = ({ events, colors, countryFlags }) => {
          const [hoveredEvent, setHoveredEvent] = useState(null);
          const centerX = 500;
          const centerY = 500;
          const innerRadius = 160;
          const outerRadius = 380;

          const getDayOfYear = (dateStr) => {
            const date = new Date(dateStr);
            const start = new Date(date.getFullYear(), 0, 0);
            return Math.floor((date - start) / (1000 * 60 * 60 * 24));
          };

          const dayToAngle = (day) => ((day - 1) / 365) * 360 - 90;

          const polarToCartesian = (angle, radius) => {
            const rad = (angle * Math.PI) / 180;
            return { x: centerX + radius * Math.cos(rad), y: centerY + radius * Math.sin(rad) };
          };

          const createArc = (startDay, endDay, innerR, outerR) => {
            const startAngle = dayToAngle(startDay);
            const endAngle = dayToAngle(endDay);
            const start1 = polarToCartesian(startAngle, innerR);
            const end1 = polarToCartesian(endAngle, innerR);
            const start2 = polarToCartesian(startAngle, outerR);
            const end2 = polarToCartesian(endAngle, outerR);
            const largeArc = endAngle - startAngle > 180 ? 1 : 0;
            return `M ${start1.x} ${start1.y} A ${innerR} ${innerR} 0 ${largeArc} 1 ${end1.x} ${end1.y} L ${end2.x} ${end2.y} A ${outerR} ${outerR} 0 ${largeArc} 0 ${start2.x} ${start2.y} Z`;
          };

          const months = ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC'];

          const eventsWithPositions = events.map(event => {
            const startDay = getDayOfYear(event.start);
            const endDay = getDayOfYear(event.end);
            const days = Math.floor((new Date(event.end) - new Date(event.start)) / (1000 * 60 * 60 * 24)) + 1;
            const primaryType = event.types[0];
            const radiusOffset = 
              primaryType === 'Love' ? 0.90 : 
              primaryType === 'Career' ? 0.45 : 
              primaryType === 'Shows' ? 0.75 : 
              primaryType === 'Hiking' ? 0.65 :
              primaryType === 'Running' ? 0.70 :
              primaryType === 'Babymaking' ? 0.85 : 
              0.6;
            const eventRadius = innerRadius + ((outerRadius - innerRadius) * radiusOffset);
            return { ...event, startDay, endDay, days, eventRadius, primaryType };
          });

          return (
            <div style={{ background: 'rgba(255,255,255,0.03)', borderRadius: '20px', padding: '40px', border: '1px solid rgba(255,255,255,0.1)', display: 'flex', flexDirection: 'column', alignItems: 'center' }}>
              <h2 style={{ margin: '0 0 30px 0', fontSize: '28px', fontWeight: 700, color: '#ffffff', textAlign: 'center' }}>
                Full Year Circle ({events.length} events)
              </h2>

              <div style={{ position: 'relative', width: '1000px', height: '1000px', maxWidth: '90vw', maxHeight: '90vh' }}>
                <svg width="100%" height="100%" viewBox="0 0 1000 1000">
                  {months.map((month, i) => {
                    const angle = dayToAngle((i * 365) / 12 + 15);
                    const pos = polarToCartesian(angle, outerRadius + 50);
                    return <text key={month} x={pos.x} y={pos.y} textAnchor="middle" style={{ fill: '#8892b0', fontSize: '14px', fontWeight: 700, letterSpacing: '2px' }}>{month}</text>;
                  })}

                  {[...Array(12)].map((_, i) => {
                    const angle = dayToAngle((i * 365) / 12);
                    const start = polarToCartesian(angle, innerRadius);
                    const end = polarToCartesian(angle, outerRadius);
                    return <line key={i} x1={start.x} y1={start.y} x2={end.x} y2={end.y} stroke="rgba(255,255,255,0.08)" strokeWidth="1" />;
                  })}

                  <circle cx={centerX} cy={centerY} r={innerRadius} fill="none" stroke="rgba(255,255,255,0.1)" strokeWidth="2" />
                  <circle cx={centerX} cy={centerY} r={outerRadius} fill="none" stroke="rgba(255,255,255,0.1)" strokeWidth="2" />

                  {eventsWithPositions.map((event, i) => {
                    const isHovered = hoveredEvent === i;
                    const color = colors.types[event.primaryType];
                    return (
                      <path key={i} d={createArc(event.startDay, event.endDay, innerRadius, event.eventRadius)} fill={color} fillOpacity={isHovered ? 0.9 : 0.7}
                        stroke={isHovered ? '#ffffff' : color} strokeWidth={isHovered ? 3 : 1}
                        style={{ cursor: 'pointer', transition: 'all 0.3s ease' }}
                        onMouseEnter={() => setHoveredEvent(i)} onMouseLeave={() => setHoveredEvent(null)} />
                    );
                  })}

                  <circle cx={centerX} cy={centerY} r={innerRadius - 15} fill="rgba(17, 25, 40, 0.95)" />
                  <text x={centerX} y={centerY - 30} textAnchor="middle" style={{ fill: '#ffffff', fontSize: '72px', fontWeight: 800 }}>2025</text>
                  <text x={centerX} y={centerY + 20} textAnchor="middle" style={{ fill: '#a8b2d1', fontSize: '16px', letterSpacing: '2px' }}>{events.length} EVENTS</text>
                </svg>

                {hoveredEvent !== null && (
                  <div style={{ position: 'absolute', top: '50%', left: '50%', transform: 'translate(-50%, -50%)', background: 'rgba(17, 25, 40, 0.98)',
                    border: `3px solid ${colors.types[eventsWithPositions[hoveredEvent].primaryType]}`, borderRadius: '16px', padding: '24px 32px',
                    minWidth: '350px', backdropFilter: 'blur(20px)', pointerEvents: 'none', zIndex: 100 }}>
                    <div style={{ display: 'flex', alignItems: 'center', gap: '12px', marginBottom: '12px' }}>
                      <div style={{ fontSize: '36px' }}>{countryFlags[eventsWithPositions[hoveredEvent].country]}</div>
                      <h3 style={{ margin: 0, fontSize: '24px', fontWeight: 700, color: '#ffffff' }}>{eventsWithPositions[hoveredEvent].name}</h3>
                    </div>
                    <div style={{ fontSize: '14px', color: '#a8b2d1', marginBottom: '12px' }}>
                      Day {eventsWithPositions[hoveredEvent].startDay}-{eventsWithPositions[hoveredEvent].endDay} of 365 â€¢ {eventsWithPositions[hoveredEvent].days} days
                    </div>
                    <div style={{ display: 'flex', flexWrap: 'wrap', gap: '8px' }}>
                      {eventsWithPositions[hoveredEvent].people.map((person, j) => (
                        <div key={j} style={{ padding: '6px 12px', borderRadius: '8px', background: `${colors.people[person]}33`,
                          border: `1px solid ${colors.people[person]}`, color: '#ffffff', fontSize: '12px', fontWeight: 600 }}>
                          {person}
                        </div>
                      ))}
                    </div>
                  </div>
                )}
              </div>
            </div>
          );
        };

        // Grid View
        const GridView = ({ events, colors, countryFlags }) => {
          return (
            <div style={{ background: 'rgba(255,255,255,0.03)', borderRadius: '20px', padding: '30px', border: '1px solid rgba(255,255,255,0.1)' }}>
              <h2 style={{ margin: '0 0 25px 0', fontSize: '28px', fontWeight: 700, color: '#ffffff', textAlign: 'center' }}>
                All Events Grid ({events.length})
              </h2>

              <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fill, minmax(320px, 1fr))', gap: '20px' }}>
                {events.map((event, i) => {
                  const primaryType = event.types[0];
                  const days = Math.floor((new Date(event.end) - new Date(event.start)) / (1000 * 60 * 60 * 24)) + 1;
                  
                  return (
                    <div key={i} style={{ background: `${colors.types[primaryType]}15`, border: `2px solid ${colors.types[primaryType]}40`,
                      borderRadius: '14px', padding: '20px', transition: 'all 0.3s ease', cursor: 'pointer' }}
                      onMouseEnter={(e) => {
                        e.currentTarget.style.transform = 'translateY(-5px)';
                        e.currentTarget.style.borderColor = colors.types[primaryType];
                        e.currentTarget.style.boxShadow = `0 10px 30px ${colors.types[primaryType]}33`;
                      }}
                      onMouseLeave={(e) => {
                        e.currentTarget.style.transform = 'translateY(0)';
                        e.currentTarget.style.borderColor = `${colors.types[primaryType]}40`;
                        e.currentTarget.style.boxShadow = 'none';
                      }}>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', marginBottom: '12px' }}>
                        <h3 style={{ margin: 0, fontSize: '18px', fontWeight: 700, color: '#ffffff', flex: 1 }}>{event.name}</h3>
                        <div style={{ fontSize: '24px', marginLeft: '10px' }}>{countryFlags[event.country]}</div>
                      </div>
                      <div style={{ fontSize: '13px', color: '#a8b2d1', marginBottom: '12px' }}>
                        {event.start === event.end ? new Date(event.start).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })
                          : `${new Date(event.start).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })} - ${new Date(event.end).toLocaleDateString('en-US', { month: 'short', day: 'numeric' })}`
                        } â€¢ {days} day{days > 1 ? 's' : ''}
                      </div>
                      <div style={{ display: 'flex', flexWrap: 'wrap', gap: '6px', marginBottom: '12px' }}>
                        {event.people.map((person, j) => (
                          <div key={j} style={{ background: `${colors.people[person]}33`, border: `1px solid ${colors.people[person]}`,
                            padding: '4px 10px', borderRadius: '8px', fontSize: '11px', fontWeight: 600, color: '#ffffff' }}>
                            {person}
                          </div>
                        ))}
                      </div>
                      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>
                        <div style={{ display: 'flex', gap: '6px', flexWrap: 'wrap' }}>
                          {event.types.map((type, j) => (
                            <div key={j} style={{ fontSize: '11px', padding: '4px 10px', borderRadius: '6px',
                              background: `${colors.types[type]}33`, border: `1px solid ${colors.types[type]}`,
                              color: '#ffffff', fontWeight: 600, textTransform: 'uppercase' }}>
                              {type}
                            </div>
                          ))}
                        </div>
                        <div style={{ fontSize: '11px', color: '#667eea', fontWeight: 600 }}>
                          {'â˜…'.repeat(event.intensity)}
                        </div>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
          );
        };

        // Main App
        const App = () => {
          const [activeView, setActiveView] = useState('sankey');

          const eventsWithDays = ALL_EVENTS.map(event => {
            const start = new Date(event.start);
            const end = new Date(event.end);
            const days = Math.floor((end - start) / (1000 * 60 * 60 * 24)) + 1;
            return { ...event, days };
          });

          const colors = {
            people: { 
              'Solo': '#1B998B', 
              'Polly': '#C44569', 
              'MX Fam': '#D97832', 
              'US Fam': '#2D5F8D', 
              'Raniti Friends': '#5FA052', 
              'Polly Friends': '#E8871E', 
              'Coworkers': '#8B4789' 
            },
            types: { 
              'Travel': '#5FA052', 
              'Love': '#C44569', 
              'Career': '#2D5F8D', 
              'Shows': '#E8871E', 
              'Hiking': '#1B998B',
              'Camping': '#7B68BE',
              'Cycling': '#F093FB',
              'Kayaking': '#4ECDC4',
              'Running': '#FF6B6B',
              'Babymaking': '#FF6B9D' 
            }
          };

          const countryFlags = { 
            'USA': 'ðŸ‡ºðŸ‡¸', 
            'Mexico': 'ðŸ‡²ðŸ‡½', 
            'Peru': 'ðŸ‡µðŸ‡ª', 
            'Germany': 'ðŸ‡©ðŸ‡ª', 
            'Austria': 'ðŸ‡¦ðŸ‡¹', 
            'Hungary': 'ðŸ‡­ðŸ‡º', 
            'Serbia': 'ðŸ‡·ðŸ‡¸' 
          };

          const totalDays = eventsWithDays.reduce((sum, e) => sum + e.days, 0);
          const concerts = eventsWithDays.filter(e => e.types.includes('Shows')).length;

          return (
            <div style={{ minHeight: '100vh', background: 'linear-gradient(135deg, #0F2027 0%, #203A43 50%, #2C5364 100%)', color: '#f5f5f5', fontFamily: '"Poppins", sans-serif', padding: '40px 20px' }}>
              <div style={{ maxWidth: '1600px', margin: '0 auto' }}>
                <div style={{ textAlign: 'center', marginBottom: '40px' }}>
                  <h1 style={{ fontSize: '64px', fontWeight: 800, margin: '0 0 15px 0', letterSpacing: '2px',
                    background: 'linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%)',
                    WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', textTransform: 'uppercase' }}>
                    2025 TRIPLE VIEW
                  </h1>
                  <p style={{ fontSize: '18px', color: '#a8b2d1', margin: 0, letterSpacing: '2px' }}>
                    {eventsWithDays.length} Events â€¢ 7 Countries â€¢ {totalDays} Days â€¢ 3 Visualizations
                  </p>
                </div>

                <div style={{ display: 'flex', justifyContent: 'center', gap: '15px', marginBottom: '30px', flexWrap: 'wrap' }}>
                  {[
                    { view: 'sankey', label: 'ðŸŒŠ Sankey Flow' },
                    { view: 'circle', label: 'â­• Circle View' },
                    { view: 'grid', label: 'ðŸ“Š Grid View' }
                  ].map(({ view, label }) => (
                    <button key={view} onClick={() => setActiveView(view)}
                      style={{
                        background: activeView === view ? 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)' : 'rgba(255,255,255,0.05)',
                        border: `2px solid ${activeView === view ? '#667eea' : 'rgba(255,255,255,0.1)'}`,
                        padding: '14px 32px', borderRadius: '25px', color: '#ffffff', fontSize: '15px', fontWeight: 700,
                        cursor: 'pointer', transition: 'all 0.3s ease', letterSpacing: '1px', textTransform: 'uppercase'
                      }}>
                      {label}
                    </button>
                  ))}
                </div>

                <div style={{ display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(150px, 1fr))', gap: '15px', marginBottom: '30px' }}>
                  {[
                    { label: 'Events', value: eventsWithDays.length, color: '#667eea' },
                    { label: 'Days', value: totalDays, color: '#f093fb' },
                    { label: 'Countries', value: 7, color: '#5FA052' },
                    { label: 'Shows', value: concerts, color: '#E8871E' }
                  ].map((stat, i) => (
                    <div key={i} style={{ background: 'rgba(255,255,255,0.03)', border: `2px solid ${stat.color}40`, borderRadius: '12px', padding: '15px', textAlign: 'center' }}>
                      <div style={{ fontSize: '32px', fontWeight: 800, color: stat.color, marginBottom: '5px' }}>{stat.value}</div>
                      <div style={{ fontSize: '11px', color: '#8892b0', letterSpacing: '1px', textTransform: 'uppercase' }}>{stat.label}</div>
                    </div>
                  ))}
                </div>

                {activeView === 'sankey' && <SankeyView events={eventsWithDays} colors={colors} />}
                {activeView === 'circle' && <CircleYearView events={eventsWithDays} colors={colors} countryFlags={countryFlags} />}
                {activeView === 'grid' && <GridView events={eventsWithDays} colors={colors} countryFlags={countryFlags} />}
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
